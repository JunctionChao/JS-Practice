<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Set类型</title>
</head>

<body>
  <script>
    // Set  用于存储任何类型的唯一值，无论是基本类型还是对象引用。
    // 只能保存值没有键名
    // 严格类型检测如字符串数字不等于数值型数字
    // 值是唯一的
    // 遍历顺序是添加的顺序，方便保存回调函数
    let set = new Set([1, 2, 3, "1", "2", "3"]);
    console.log(set); // Set(6) {1, 2, 3, "1", "2", "3}
    set.add(4)

    // 和对象比较
    let obj = {
      1: 'hdcms',
      '1': 'houdunren'
    };
    // 对象中所有属性都会转化为字符串，所以上述对象属性会被后者覆盖
    console.log(obj); // {1: "houdunren"}
    console.log(set.size); // 7
    // 检测元素是否存在
    console.log(set.has(2)); // true
    // 使用 delete 方法删除单个元素，返回值为boolean类型
    console.log(set.delete("3")); // true
    console.log(set.delete("4")); // false

    // clear 清空所有元素
    console.log(set.values()); // SetIterator {1, 2, 3, "1", "2", …}
    set.clear();
    console.log(set.values()); // SetIterator {}

    // 可以使用点语法 或 Array.form 静态方法将Set类型转为数组，这样就可以使用数组处理函数了
    set = new Set(["hdcms", "houdunren"]);
    console.log([...set]); //["hdcms", "houdunren"]
    console.log(Array.from(set)); //["hdcms", "houdunren"]


    // 移除Set中大于5的数值
    let hd = new Set("123456789");
    hd = new Set([...hd].filter(item => item < 5));
    console.log(hd); // Set(4) {"1", "2", "3", "4"}

    // 利用Set进行字符串去重
    console.log([...new Set("houdunren")].join("")); // houdnre
    // 利用set进行数组去重
    let arr = [1, 2, 3, 5, 2, 3];
    console.log([...new Set(arr)]); // [1, 2, 3, 5]

    // 遍历Set
    // 使用 keys()/values()/entries() 都可以返回迭代对象，因为set类型只有值所以 keys与values 方法结果一致
    hd = new Set(["hdcms", "houdunren"]);
    console.log(hd.values()); //SetIterator {"hdcms", "houdunren"}
    console.log(hd.keys()); //SetIterator {"hdcms", "houdunren"}
    console.log(hd.entries()); //SetIterator {"hdcms" => "hdcms", "houdunren" => "houdunren"}

    // 使用 forof 遍历Set数据，默认使用 values 方法创建迭代器
    set = new Set([7, 6, 2, 8, 2, 6]);
    for (const iterator of set) {
      console.log(iterator); // 7, 6, 2, 8,
    }

    // 使用 forEach 遍历Set数据，默认使用 values 方法创建迭代器
    // 为了保持和遍历数组参数统一，函数中的item与key是一样的
    set.forEach(function(item, key, set){
      console.log(item, key, set);
    });
    // 简写方式
    // set.forEach((item, key, set) => console.log(item, key, set));

  </script>
</body>

</html>